import*as t from"@angular/core";import{Injectable as e,Inject as n}from"@angular/core";import{getContainerElementAndSetTemplate as o}from"single-spa-angular/internals";import{BrowserPlatformLocation as r,DOCUMENT as s,PlatformLocation as i}from"@angular/common";function a(){try{t.enableProdMode()}catch{}}class u extends r{constructor(){super(...arguments),this.skipNextPopState=!1,this.source="Window.addEventListener:popstate"}pushState(t,e,n){this.skipNextPopState=!0,super.pushState(t,e,n)}replaceState(t,e,n){this.skipNextPopState=!0,super.replaceState(t,e,n)}onPopState(t){const e=Zone.current;t=e.wrap(t,this.source);return super.onPopState(e=>{const n=!!e.singleSpa;this.skipNextPopState&&n?this.skipNextPopState=!1:t(e)})}static{this.ɵfac=(()=>{let e;return function(n){return(e||(e=t.ɵɵgetInheritedFactory(u)))(n||u)}})()}static{this.ɵprov=t.ɵɵdefineInjectable({token:u,factory:u.ɵfac})}}function p(){return[{provide:u,deps:[[new n(s)]]},{provide:i,useExisting:u}]}const c={NgZone:null,bootstrapFunction:null,template:null,Router:void 0,domElementGetter:void 0,updateFunction:()=>Promise.resolve(),bootstrappedNgModuleRefOrAppRef:null};function l(t){const e={...c,...t};return{bootstrap:g.bind(null,e),mount:d.bind(null,e),unmount:f.bind(null,e),update:e.updateFunction}}async function g(t){"noop"!==t.NgZone&&(t.NgZone.assertInAngularZone=()=>{},t.NgZone.assertNotInAngularZone=()=>{},t.routingEventListener=()=>{t.bootstrappedNgZone.run(()=>{})})}async function d(t,e){o(t,e);const n=t.bootstrapFunction(e);const r=await n;const s=r.injector.get(u,null),i="noop"!==t.NgZone;const a=t;if(i){const e=r.injector.get(t.NgZone);null!==s&&function(t,e){if(!e.NavigationStart)return;const n=t.injector.get(e.Router),o=n.events.subscribe(t=>{if(t instanceof e.NavigationStart){const t=n.getCurrentNavigation();"imperative"!==t.trigger&&(t.extras.skipLocationChange=!0,t.extras.replaceUrl=!1)}});t.onDestroy(()=>o.unsubscribe())}(r,t),a.bootstrappedNgZone=e,window.addEventListener("single-spa:routing-event",a.routingEventListener)}return a.bootstrappedNgModuleRefOrAppRef=r,r}function f(t){return Promise.resolve().then(()=>{t.routingEventListener&&window.removeEventListener("single-spa:routing-event",t.routingEventListener),t.bootstrappedNgModuleRefOrAppRef.destroy(),t.bootstrappedNgModuleRefOrAppRef=null})}export{a as enableProdMode,p as getSingleSpaExtraProviders,l as singleSpaAngular};
//# sourceMappingURL=single-spa-angular.min.js.map
